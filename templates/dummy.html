{% extends "basic_page_template.html" %}
{% block title %}HeyPhineas{% endblock %}
{% block content_area %}
<!-- JAVASCRIPT IMPORTS-->
<script src="/static/js/loadscripts.js"></script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>

<!--         USERS OBJECT                -->
<script>var user = "{{session['user']}}"</script>
<!-- JAVASCRIPT PROJECT FILES -->

<script src="/static/js/users.js"></script>
<script src="/static/js/icons.js"></script>
<script src="/static/js/buttons.js"></script>
<script src="/static/js/socket.js"></script>
<script src="/static/js/notifications.js"></script>
<script src="/static/js/chat.js"></script>
<script src="/static/js/maplogic.js"></script>
<!--<script src="/static/js/ac.js"></script>-->


<div class="popup h-[200px]" id="invite_user_popup" style="display: none;">
    <form class="h-[100%] flex flex-col justify-between" method="POST" autocomplete="off" action="" id="add_user_form">
            <h2 class="mt-[20px] text-[35px] ">
                Invite user
            </h2>
            <div class="autocomplete" style="position: relative;">
                <input required id="invite_user_input" type="text" name="user_to_add" placeholder="Username">
            </div>
            <div>
              <input class="form_button confirm" id="confirm_invite" type="button" style="float: left;" value="Invite"/>
              <button type="button" class="form_button close_button" id="user_invite_close" style="float: right;" value="Close">Close</button>
            </div>
    </form>
</div>

<div class="popup" id="add_loc_popup" style="display: none;">
    <h2>
        Add Location
    </h2>
    <div>
        <form method="POST" autocomplete="off" action="" id="add_loc_form" style="margin: 0 auto;">
        <div class="autocomplete" style="position: relative;">
            <input required id="add_loc_name" type="text" name="lat" placeholder="Place name"><br><br>
            <input required id="add_loc_type" type="text" name="lat" placeholder="Place Type (e.g park)"><br><br>
            <input required id="add_loc_lat" type="text" name="lat" placeholder="LAT"><br><br>
            <input required id="add_loc_lng" type="text" name="lng" placeholder="LNG"><br>
        </div><br><br><br>
          <input class="form_button confirm" id="confirm_loc" type="button" style="float: left;" value="Add Location"/>
          <button type="button" class="form_button close_button" id="close_loc" style="float: right;" value="Close">Close</button>
        </form>
    </div>
</div>

<div title="content-area" class="flex flex-row justify-around">

      <!--            NOTIFICATION PARTY AREA    -->

        <div title="notification-area" class="flex flex-col w-[25%] max-w-[25%]">
            <div id="party-menu" title="party-menu" class="flex flex-col panel mb-[40px]">
                <div class="relative flex flex-row">
                    <p class="center_white mx-auto font-bold text-3xl my-[20px]">
                        Party
                    </p>
                    <div class="absolute right-0 w-[40px] h-[40px]">
                        <button type="button" id="collapse-party-button" class="w-[100%] h-[100%] text-[20px]">
                            <span class="fa fa-minus"></span>
                        </button>
                    </div>
                </div>
                    <div class="flex">
                        <button class="mb-2 mx-auto w-[40px] h-[40px]" type="button" id="invite_user">
                            <span class="fa fa-user-plus"></span>
                        </button>
                    </div>
                    <div id="party-members" title="party-members" class="center_white" style="display: block;">

                    </div>
            </div>
            <div title="notification-inbox" class="panel overflow-x-auto h-[{{'90%' if not in_party else '45%'}}]">
                <div class="relative flex flex-row">
                    <p class="center_white mx-auto font-bold text-3xl my-[20px]">Inbox</p>
                    <div class="absolute right-0 w-[40px] h-[40px]">
                        <button type="button" id="collapse-inbox-button" class="w-[100%] h-[100%] text-[20px]">
                            <span class="fa fa-minus"></span>
                        </button>
                    </div>
                </div>
                <div>
                    <div id="action_form" class="w-[90%] mx-auto">
                        <input id="message_id" type="text" name="message_id" hidden/>
                        <input id="reaction" type="text" name="action" hidden/>
                        <div id="notification_autogenerated_div" style="display: block;">
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!--       MAP     -->

        <div title="map" class="w-[40%] panel">
            <div class="flex flex-row justify-around">
               <button id="start_origin" class="my-2 tab_button bg-gray-light text-white basis-1/3" type="button">
                       Start Simulation
               </button>
               <button id="add_loc_button" class="my-2 tab_button bg-gray-light text-white basis-1/3" type="button">
                       Add Location
               </button>
            </div>
            <p class="text-white text-center" id="msg"></p>
            <div id="map" style="height:690px;"></div>
        </div>



      <!--                     CHAT  AREA                  -->
        <div title="chat-room-area" class="flex flex-col w-[25%] panel">
            <div title="chat-room-tabs">
                   <div id="tabs" title="tabs" class="flex flex-row justify-around">
                       <button title="0" class="my-2 tab_button _active" type="button">
                           Public
                       </button>
                   </div>
                    <div title="active tab" class="w-[94%] mx-4">
                    </div>
            </div>
            <div id="chat_room_messages" title="chat" class="flex flex-col-reverse text-left mx-4 bg-[#202329] rounded h-[80%]">
<!--                For each message
                        <p> or whatever
-->
            </div>
            <div title="input-area" class="mx-4 mt-2 rounded bg-white h-[10%] flex">
                <input id="chat_input_area" name="chat_input_area" placeholder="Send a message" class="break-words text-black text-center m-auto rounded w-[100%] h-[100%]">
            </div>
        </div>
    </div>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAqKL67kNJmuQwYxJ8hmFCVBEL3iLTM1xs&callback=initMap&v=weekly&channel=2">
        async
</script>
{% endblock %}